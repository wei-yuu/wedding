<template>
  <form-field question="æœ€å¾Œæƒ³å‘Šè¨´æˆ‘å€‘ï¼Ÿ" :disable-button="!modelValue">
    <textarea
      ref="message"
      class="w-full resize-none overflow-hidden whitespace-pre-wrap border-x-transparent border-t-transparent shadow-none"
      placeholder="é–‹æ”¾å¤§è‚†ç¥ç¦å”·ï½žæ²’æœ‰å°±å¯«ç„¡ðŸ¥¹"
      :style="{
        height: textareaHeight,
      }"
      v-model="modelValue"
    >
    </textarea>
  </form-field>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue';

const modelValue = defineModel({ required: true, default: '' });
const message = ref<HTMLElement>();
const textareaHeight = ref('44px');

watch(
  () => modelValue.value,
  () => {
    if (message.value) {
      message.value.style.height = '44px';
      textareaHeight.value = `${message.value.scrollHeight}px`;
    }
  },
);
</script>
