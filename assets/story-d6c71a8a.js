import{q as at,r as ot,d as Q,b as H,s as mt,o as T,c as z,u as Z,n as W,a as C,j as et,w as tt,F as gt,g as $t,t as P,h as st,x as yt}from"./index-1198f01f.js";import{i as ut,a as ct,u as lt}from"./use-api-call-f59af369.js";const dt=at("timeline",()=>{const c=ot("start");return{align:c,updateState:f=>{c.value=f.align}}}),vt=Q({__name:"index",props:{align:{}},setup(c){const d=c,f=dt(),S=H(()=>{switch(f.align){case"center":return"items-center";case"start":default:return"items-start"}});return mt(()=>{f.updateState(d)}),(h,x)=>(T(),z("div",{class:W(["m-auto grid grid-flow-dense grid-cols-[auto_min-content_auto] gap-y-6 p-6 lg:max-w-[1280px] justify-self-center",[S.value]])},[Z(h.$slots,"default")],2))}}),_t={class:"contents"},wt=C("span",{class:"absolute top-[-24px] h-6 w-1 bg-gray-300"},null,-1),St=C("span",{class:"absolute h-full w-1 bg-gray-300"},null,-1),Mt=Q({__name:"item",props:{align:{},color:{},fullDot:{type:Boolean},index:{},item:{}},setup(c){const d=c,f=dt(),S=H(()=>window.innerWidth>=768&&d.index%2===1?"col-start-3 ps-6":"col-start-1 justify-self-end pe-6"),h=H(()=>window.innerWidth>=768&&d.index%2===1?"col-start-1 pe-6":"col-start-3 ps-6"),x=H(()=>{switch(f.align){case"center":return"justify-center";case"start":default:return"justify-start"}}),M=H(()=>d.color?{pink:"bg-pink",blue:"bg-blue",gray:"bg-gray-300"}[d.color]:"bg-gray-300");return($,v)=>(T(),z("div",_t,[C("div",{class:W([S.value])},[Z($.$slots,"opposite",{item:$.item})],2),C("div",{class:W(["relative col-start-2 flex h-full flex-col items-center",[x.value]])},[Z($.$slots,"divider",{},()=>[wt,C("span",{class:W(["z-10 h-7 w-7 rounded-full",[M.value,{"border-4":!$.fullDot}]])},null,2),St])],2),C("div",{class:W([h.value])},[Z($.$slots,"default",{item:$.item})],2)]))}}),bt={class:"w-full text-2xl flex justify-evenly items-center p-4 bg-white/70 rounded-b-lg gap-4"},Dt={key:0,class:"whitespace-pre-line text-wrap break-all min-w-[25%]"},xt=["src"],kt=Q({__name:"timeline",props:{stories:{}},setup(c){const d=c,f=H(()=>window.innerWidth<768?"[writing-mode:vertical-lr] [text-orientation:upright]":""),S=H(()=>d.stories.map(h=>({year:h.year,month:h.month,title:h.title,description:h.description,photo:h.photo,fullDot:h.majorEvent,color:h.color})));return(h,x)=>{const M=Mt,$=vt;return T(),et($,{align:"center"},{default:tt(()=>[(T(!0),z(gt,null,$t(S.value,(v,b)=>(T(),et(M,{key:b,index:b,item:v,"full-dot":v.fullDot,color:v.color},{opposite:tt(({item:{year:k,month:p}})=>[C("span",{class:W(["text-2xl",[f.value]])},P(k)+" 年 "+P(p)+" 月",3)]),default:tt(({item:{title:k,photo:p,description:I,color:_}})=>[C("h2",{class:W(["text-3xl px-4 pt-4 rounded-t-lg",{"bg-pink/50":_==="pink","bg-blue/50":_==="blue","bg-gray-300/50":_==="gray"}])},P(k),3),C("div",bt,[I?(T(),z("span",Dt,P(I),1)):st("",!0),p?(T(),z("img",{key:1,class:"max-w-[70%]",src:p},null,8,xt)):st("",!0)])]),_:2},1032,["index","item","full-dot","color"]))),128))]),_:1})}}}),Ot=async c=>await ut.get("https://www.googleapis.com/drive/v3/files",{params:{key:ct,q:`'${c}' in parents`}}).then(({data:d})=>d.files),Ct=()=>lt(async()=>await Ot("16O-BwGriy2ITFfQ5zSsOm8jFbGCV83Dv")),jt=async({sheetId:c,range:d})=>await ut.get(`https://sheets.googleapis.com/v4/spreadsheets/${c}/values/${d}`,{params:{key:ct}}).then(({data:f})=>f.values),Tt=()=>lt(async()=>await jt({sheetId:"1J4nMChqEgfE6XgD4C-AgTsyBGGFGkrTSrrZp0q7Ppbw",range:"Stories"}));var It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lt(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ft={exports:{}};(function(c,d){(function(f,S){c.exports=S()})(It,function(){var f=1e3,S=6e4,h=36e5,x="millisecond",M="second",$="minute",v="hour",b="day",k="week",p="month",I="quarter",_="year",O="date",E="Invalid Date",U=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ht={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],t=s%100;return"["+s+(n[(t-20)%10]||n[t]||n[0])+"]"}},R=function(s,n,t){var r=String(s);return!r||r.length>=n?s:""+Array(n+1-r.length).join(t)+s},pt={s:R,z:function(s){var n=-s.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+R(r,2,"0")+":"+R(e,2,"0")},m:function s(n,t){if(n.date()<t.date())return-s(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(r,p),i=t-e<0,a=n.clone().add(r+(i?-1:1),p);return+(-(r+(t-e)/(i?e-a:a-e))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:p,y:_,w:k,d:b,D:O,h:v,m:$,s:M,ms:x,Q:I}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},B="en",L={};L[B]=ht;var nt="$isDayjsObject",X=function(s){return s instanceof q||!(!s||!s[nt])},V=function s(n,t,r){var e;if(!n)return B;if(typeof n=="string"){var i=n.toLowerCase();L[i]&&(e=i),t&&(L[i]=t,e=i);var a=n.split("-");if(!e&&a.length>1)return s(a[0])}else{var u=n.name;L[u]=n,e=u}return!r&&e&&(B=e),e||!r&&B},m=function(s,n){if(X(s))return s.clone();var t=typeof n=="object"?n:{};return t.date=s,t.args=arguments,new q(t)},o=pt;o.l=V,o.i=X,o.w=function(s,n){return m(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var q=function(){function s(t){this.$L=V(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[nt]=!0}var n=s.prototype;return n.parse=function(t){this.$d=function(r){var e=r.date,i=r.utc;if(e===null)return new Date(NaN);if(o.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var a=e.match(U);if(a){var u=a[2]-1||0,l=(a[7]||"0").substring(0,3);return i?new Date(Date.UTC(a[1],u,a[3]||1,a[4]||0,a[5]||0,a[6]||0,l)):new Date(a[1],u,a[3]||1,a[4]||0,a[5]||0,a[6]||0,l)}}return new Date(e)}(t),this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return o},n.isValid=function(){return this.$d.toString()!==E},n.isSame=function(t,r){var e=m(t);return this.startOf(r)<=e&&e<=this.endOf(r)},n.isAfter=function(t,r){return m(t)<this.startOf(r)},n.isBefore=function(t,r){return this.endOf(r)<m(t)},n.$g=function(t,r,e){return o.u(t)?this[r]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,r){var e=this,i=!!o.u(r)||r,a=o.p(t),u=function(A,w){var j=o.w(e.$u?Date.UTC(e.$y,w,A):new Date(e.$y,w,A),e);return i?j:j.endOf(b)},l=function(A,w){return o.w(e.toDate()[A].apply(e.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(w)),e)},g=this.$W,y=this.$M,D=this.$D,F="set"+(this.$u?"UTC":"");switch(a){case _:return i?u(1,0):u(31,11);case p:return i?u(1,y):u(0,y+1);case k:var Y=this.$locale().weekStart||0,G=(g<Y?g+7:g)-Y;return u(i?D-G:D+(6-G),y);case b:case O:return l(F+"Hours",0);case v:return l(F+"Minutes",1);case $:return l(F+"Seconds",2);case M:return l(F+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,r){var e,i=o.p(t),a="set"+(this.$u?"UTC":""),u=(e={},e[b]=a+"Date",e[O]=a+"Date",e[p]=a+"Month",e[_]=a+"FullYear",e[v]=a+"Hours",e[$]=a+"Minutes",e[M]=a+"Seconds",e[x]=a+"Milliseconds",e)[i],l=i===b?this.$D+(r-this.$W):r;if(i===p||i===_){var g=this.clone().set(O,1);g.$d[u](l),g.init(),this.$d=g.set(O,Math.min(this.$D,g.daysInMonth())).$d}else u&&this.$d[u](l);return this.init(),this},n.set=function(t,r){return this.clone().$set(t,r)},n.get=function(t){return this[o.p(t)]()},n.add=function(t,r){var e,i=this;t=Number(t);var a=o.p(r),u=function(y){var D=m(i);return o.w(D.date(D.date()+Math.round(y*t)),i)};if(a===p)return this.set(p,this.$M+t);if(a===_)return this.set(_,this.$y+t);if(a===b)return u(1);if(a===k)return u(7);var l=(e={},e[$]=S,e[v]=h,e[M]=f,e)[a]||1,g=this.$d.getTime()+t*l;return o.w(g,this)},n.subtract=function(t,r){return this.add(-1*t,r)},n.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||E;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=o.z(this),u=this.$H,l=this.$m,g=this.$M,y=e.weekdays,D=e.months,F=e.meridiem,Y=function(w,j,N,J){return w&&(w[j]||w(r,i))||N[j].slice(0,J)},G=function(w){return o.s(u%12||12,w,"0")},A=F||function(w,j,N){var J=w<12?"AM":"PM";return N?J.toLowerCase():J};return i.replace(K,function(w,j){return j||function(N){switch(N){case"YY":return String(r.$y).slice(-2);case"YYYY":return o.s(r.$y,4,"0");case"M":return g+1;case"MM":return o.s(g+1,2,"0");case"MMM":return Y(e.monthsShort,g,D,3);case"MMMM":return Y(D,g);case"D":return r.$D;case"DD":return o.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Y(e.weekdaysMin,r.$W,y,2);case"ddd":return Y(e.weekdaysShort,r.$W,y,3);case"dddd":return y[r.$W];case"H":return String(u);case"HH":return o.s(u,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return A(u,l,!0);case"A":return A(u,l,!1);case"m":return String(l);case"mm":return o.s(l,2,"0");case"s":return String(r.$s);case"ss":return o.s(r.$s,2,"0");case"SSS":return o.s(r.$ms,3,"0");case"Z":return a}return null}(w)||a.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,r,e){var i,a=this,u=o.p(r),l=m(t),g=(l.utcOffset()-this.utcOffset())*S,y=this-l,D=function(){return o.m(a,l)};switch(u){case _:i=D()/12;break;case p:i=D();break;case I:i=D()/3;break;case k:i=(y-g)/6048e5;break;case b:i=(y-g)/864e5;break;case v:i=y/h;break;case $:i=y/S;break;case M:i=y/f;break;default:i=y}return e?i:o.a(i)},n.daysInMonth=function(){return this.endOf(p).$D},n.$locale=function(){return L[this.$L]},n.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),i=V(t,r,!0);return i&&(e.$L=i),e},n.clone=function(){return o.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s}(),rt=q.prototype;return m.prototype=rt,[["$ms",x],["$s",M],["$m",$],["$H",v],["$W",b],["$M",p],["$y",_],["$D",O]].forEach(function(s){rt[s[1]]=function(n){return this.$g(n,s[0],s[1])}}),m.extend=function(s,n){return s.$i||(s(n,q,m),s.$i=!0),m},m.locale=V,m.isDayjs=X,m.unix=function(s){return m(1e3*s)},m.en=L[B],m.Ls=L,m.p={},m})})(ft);var Yt=ft.exports;const it=Lt(Yt),At=at("story",()=>{const c=Tt(),d=Ct(),f=ot([]);return{stories:f,loadStories:async()=>{var M;const h=await d.fetch();(M=(await c.fetch()).value)==null||M.map($=>{var E,U;const[v,b,k,p,I,_]=$,O=(U=(E=h.value)==null?void 0:E.find(K=>p===K.name.split(".")[0]))==null?void 0:U.id;f.value.push({year:String(it(v).year()),month:String(it(v).month()+1),title:b,description:k,photo:O&&`https://drive.google.com/thumbnail?id=${O}&sz=w1366`,majorEvent:I==="TRUE",color:_})})}}}),Ft=Q({__name:"story",setup(c){const{stories:d,loadStories:f}=At();return d.length||f(),(S,h)=>{const x=kt;return T(),et(x,{stories:yt(d)},null,8,["stories"])}}});export{Ft as default};
